<!doctype html>
<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,user-scalable=no">
	<style>
		body { background-color: #eee;color: #555; }
		button, a { display: block;margin: 20px 0;background: #00CEB9;border: none;color: #fff;line-height: 40px;width: 200px;cursor: pointer;outline: none;text-align: center; }
		button:hover, a:hover { box-shadow: 0 0 5px #33CEB9; }
		button:active, a:active { background: #fff;color: #00CEB9; }
		input { height: 40px;outline: none;width: 300px;text-align: center;font-size: 16px;color: #00CEB9; float: left;border: 1px solid #fff; }
	</style>
</head>

<body>

	<h1>Demo 网页插件 CRM 对接</h1>
	<a target='_blank' href='http://docs.easemob.com/cs/300visitoraccess/20webplugin'>网页插件集成文档</a>
	<br><br><br><br><br><br><br>




	<br><br><br><h1>测试</h1>
	<div>
		<input id='testvalue' type='text' placeholder='请输入您的tenantId'/>
		<a id='test'>联系客服</a>
	</div>
	<br><br><br>
	<p>说明：</p>
	<ul>
		<li>网页插件通过发送扩展消息的方式来对接CRM</li>
		<li>移动端带扩展消息要使用extMsg字段</li>
		<li>pc端使用onReady回调发送扩展消息</li>
		<li>需要在坐席端 设置 -> 自定义信息接口 中设置URL</li>
		<li>path，staticPath请严格按照示例格式配置，不能增加或省略任何部分</li>
		<li>若非私有部署，domain 必须配置为'//kefu.easemob.com'</li>
	</ul>


<script>
	var v = document.getElementById('testvalue');
	v.value = localStorage.getItem('easemobtest') || '';
	document.getElementById('test').onclick = function () {
		if (/\d+/.test(v.value)) {
			localStorage.setItem('easemobtest', v.value);
			easemobim.bind({ tenantId: v.value.replace(/\s/g, '') })
		}
	};
</script>
<script>
	window.easemobim = window.easemobim || {};

	easemobim.config = {
		domain: '//kefu.easemob.com',
		path: '//index-swf.github.io/webim-plugin-demo',
		staticPath: '//index-swf.github.io/webim-plugin-demo/static',
		// 移动端采用extMsg来传递扩展消息
		extMsg: {
			"cmd": {
				"updateVisitorInfoSrc": {
					"params": {
						"customUserId": 'EEP4EVP9CCMTRTCKVJHX',
						"name": "Jack",
						"age": "40",
						"sex": "man"
					}
				}
			}
		},
		// pc端采用 onReady 回调来发送扩展消息
		onready: function () {
			easemobim.sendExt({
				ext: {
					"cmd": {
						"updateVisitorInfoSrc": {
							"params": {
								"customUserId": 'EEP4EVP9CCMTRTCKVJHX',
								"name": "Jack",
								"age": "40",
								"sex": "man"
							}
						}
					}
				}
			});
		},
		hide: true
	};
</script>

<script src='//index-swf.github.io/webim-plugin-demo/easemob.js'></script>
</body>
</html>
